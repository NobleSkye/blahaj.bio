---
import SiteLayout from '../layouts/SiteLayout.astro';
---

<SiteLayout title="Blahaj.bio - Create Your Bio Page">
  <div class="min-h-screen bg-github-canvas-default py-16">
    <div class="max-w-3xl mx-auto px-4">
      <div class="text-center mb-12">
        <h1 class="text-5xl font-bold text-github-fg-default mb-4">
          New Profile
        </h1>
        <p class="text-xl text-github-fg-muted mb-8">
          Create your personal bio page in seconds (after github actions run)
        </p>
      </div>

      <div class="bg-github-canvas-overlay rounded-2xl shadow-xl p-8 border border-github-border-default">
        <form id="bioForm" class="space-y-6">
          <div>
            <label for="username" class="block text-sm font-medium text-github-fg-default">
              Username
            </label>
            <input
              type="text"
              id="username"
              name="username"
              required
              pattern="[a-zA-Z0-9-_]+"
              class="mt-1 block w-full rounded-md bg-github-canvas-default border border-github-border-default text-github-fg-default px-3 py-2 focus:border-github-accent-emphasis focus:ring-github-accent-emphasis"
              placeholder="blahaj-lover"
            />
            <p class="mt-1 text-sm text-github-fg-muted">Only letters, numbers, hyphens, and underscores allowed</p>
          </div>

          <div>
            <label for="display_name" class="block text-sm font-medium text-github-fg-default">
              Display Name
            </label>
            <input
              type="text"
              id="display_name"
              name="display_name"
              required
              class="mt-1 block w-full rounded-md bg-github-canvas-default border border-github-border-default text-github-fg-default px-3 py-2 focus:border-github-accent-emphasis focus:ring-github-accent-emphasis"
              placeholder="Blahaj Enthusiast"
            />
          </div>

          <div>
            <label for="pronouns" class="block text-sm font-medium text-github-fg-default">
              Pronouns
            </label>
            <input
              type="text"
              id="pronouns"
              name="pronouns"
              required
              class="mt-1 block w-full rounded-md bg-github-canvas-default border border-github-border-default text-github-fg-default px-3 py-2 focus:border-github-accent-emphasis focus:ring-github-accent-emphasis"
              placeholder="they/them"
            />
          </div>

          <div>
            <label for="bio" class="block text-sm font-medium text-github-fg-default">
              Bio
            </label>
            <textarea
              id="bio"
              name="bio"
              rows="4"
              required
              class="mt-1 block w-full rounded-md bg-github-canvas-default border border-github-border-default text-github-fg-default px-3 py-2 focus:border-github-accent-emphasis focus:ring-github-accent-emphasis"
              placeholder="I love Blahaj and coding!"
            ></textarea>
          </div>

          <div>
            <label for="links" class="block text-sm font-medium text-github-fg-default">
              Website Links
            </label>
            <textarea
              id="links"
              name="links"
              rows="3"
              class="mt-1 block w-full rounded-md bg-github-canvas-default border border-github-border-default text-github-fg-default px-3 py-2 focus:border-github-accent-emphasis focus:ring-github-accent-emphasis"
              placeholder="https://github.com/NobleSkye&#10;https://blahaj.bio&#10;https://bsky.app/profile/NobleSkye.dev"
            ></textarea>
            <p class="mt-1 text-sm text-github-fg-muted">One link per line</p>
          </div>

          <div class="flex items-start">
            <div class="flex items-center h-5">
              <input
                id="terms"
                name="terms"
                type="checkbox"
                required
                class="h-4 w-4 rounded border-github-border-default text-github-accent-emphasis focus:ring-github-accent-emphasis bg-github-canvas-default"
              />
            </div>
            <div class="ml-3">
              <label for="terms" class="text-sm text-github-fg-default">
                I agree to follow the <a href="https://github.com/NobleSkye/blahaj.bio/blob/main/code_of_conduct.md" class="text-github-accent-fg hover:text-github-accent-emphasis">Code of Conduct</a>
              </label>
            </div>
          </div>

          <button
            type="submit"
            class="w-full px-4 py-2 text-white bg-github-accent-emphasis hover:bg-github-accent-fg rounded-lg font-semibold transition-colors"
          >
            Submit on Github
          </button>
        </form>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById('bioForm') as HTMLFormElement;
    
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const formData = new FormData(form);
      const title = `[Bio]: ${formData.get('username')}`;
      const body = `### Username\n${formData.get('username')}\n\n### Display Name\n${formData.get('display_name')}\n\n### Pronouns\n${formData.get('pronouns')}\n\n### Bio\n${formData.get('bio')}\n\n### Website Links\n${formData.get('links')}`;
      
      const issueUrl = `https://github.com/nobleskye/blahaj.bio/issues/new?title=${encodeURIComponent(title)}&body=${encodeURIComponent(body)}&labels=bio-creation`;
      
      window.location.href = issueUrl;
    });
  </script>
</SiteLayout>